# Use an official GCC image
FROM gcc:12

# Set working directory
WORKDIR /app

# Copy source code
COPY ./src /app/src
COPY ./CMakeLists.txt /app/

# Add entrypoint script
COPY entrypoint.sh /app/
RUN chmod +x /app/entrypoint.sh


# Install cmake and build
RUN apt-get update && apt-get install -y cmake && \
    mkdir build && cd build && cmake .. && make

# Optional (documented port)
EXPOSE 1234

# Entry point - allows dynamic arguments
ENTRYPOINT ["./entrypoint.sh"]